# $Id$
SET(NuToMechanicsConstitutive_SOURCES
constitutive/ConstitutiveBase.cpp
constitutive/ConstitutiveInputBase.cpp
constitutive/ConstitutiveOutputBase.cpp
constitutive/ConstitutiveStaticDataBase.cpp
constitutive/ConstitutiveTangentBase.cpp
constitutive/ConstitutiveTangentLocal.cpp
constitutive/thermal/HeatFlux1D.cpp
constitutive/thermal/HeatFlux2D.cpp
constitutive/thermal/HeatFlux3D.cpp
constitutive/thermal/LinearHeatFlux.cpp
constitutive/thermal/Temperature.cpp
constitutive/thermal/TemperatureGradient1D.cpp
constitutive/thermal/TemperatureGradient2D.cpp
constitutive/thermal/TemperatureGradient3D.cpp
constitutive/mechanics/ConstitutiveStaticDataDamageViscoPlasticity3D.cpp
constitutive/mechanics/ConstitutiveStaticDataDamageViscoPlasticity3DFatigue.cpp
constitutive/mechanics/ConstitutiveStaticDataGradientDamage1D.cpp
constitutive/mechanics/ConstitutiveStaticDataGradientDamagePlasticity1D.cpp
constitutive/mechanics/ConstitutiveStaticDataMisesPlasticity3D.cpp
constitutive/mechanics/ConstitutiveStaticDataMisesPlasticityWithEnergy3D
constitutive/mechanics/ConstitutiveStaticDataNonlocalDamagePlasticity2DPlaneStrain.cpp
constitutive/mechanics/ConstitutiveStaticDataNonlocalDamagePlasticity3D.cpp
constitutive/mechanics/ConstitutiveStaticDataPrevEngineeringStressStrain1D.cpp
constitutive/mechanics/ConstitutiveStaticDataPrevEngineeringStressStrain2DPlaneStrain.cpp
constitutive/mechanics/ConstitutiveStaticDataPrevEngineeringStressStrain3D.cpp
constitutive/mechanics/ConstitutiveStaticDataStrainGradientDamagePlasticity1D.cpp
constitutive/mechanics/EngineeringStress1D.cpp
constitutive/mechanics/EngineeringStress2D.cpp
constitutive/mechanics/EngineeringStress3D.cpp
constitutive/mechanics/DeformationGradient1D.cpp
constitutive/mechanics/Damage.cpp
constitutive/mechanics/DamageViscoPlasticityEngineeringStress.cpp
constitutive/mechanics/DamageViscoPlasticityHardeningEngineeringStress.cpp
constitutive/mechanics/DeformationGradient2D.cpp
constitutive/mechanics/DeformationGradient3D.cpp
constitutive/mechanics/Displacements1D.cpp
constitutive/mechanics/EngineeringStrain1D.cpp
constitutive/mechanics/EngineeringStrain2D.cpp
constitutive/mechanics/EngineeringStrain3D.cpp
constitutive/mechanics/GradientDamageEngineeringStress.cpp
constitutive/mechanics/GradientDamagePlasticityEngineeringStress.cpp
constitutive/mechanics/GreenLagrangeStrain1D.cpp
constitutive/mechanics/GreenLagrangeStrain2D.cpp
constitutive/mechanics/GreenLagrangeStrain3D.cpp
constitutive/mechanics/InterfaceTractions1D.cpp
constitutive/mechanics/InterfaceTractions2D.cpp
constitutive/mechanics/InterfaceTractions3D.cpp
constitutive/mechanics/LinearElasticEngineeringStress.cpp
constitutive/mechanics/LocalEqPlasticStrain.cpp
constitutive/mechanics/LocalEqStrain.cpp
constitutive/mechanics/MisesPlasticityEngineeringStress.cpp
constitutive/mechanics/NonlocalEqPlasticStrain.cpp
constitutive/mechanics/NonlocalEqStrain.cpp
constitutive/mechanics/NonlocalDamagePlasticityEngineeringStress.cpp
constitutive/mechanics/RelativeInterfaceDisplacements1D.cpp
constitutive/mechanics/RelativeInterfaceDisplacements2D.cpp
constitutive/mechanics/RelativeInterfaceDisplacements3D.cpp
constitutive/mechanics/SecondPiolaKirchhoffStress1D.cpp
constitutive/mechanics/SecondPiolaKirchhoffStress2D.cpp
constitutive/mechanics/SecondPiolaKirchhoffStress3D.cpp
constitutive/mechanics/StrainGradientDamagePlasticityEngineeringStress.cpp
constitutive/moistureTransport/MoistureTransport.cpp
constitutive/moistureTransport/WaterPhaseFraction.cpp
constitutive/moistureTransport/RelativeHumidity.cpp
)

SET(NuToMechanicsConstraint_SOURCES
constraints/ConstraintBase.cpp
constraints/ConstraintEquationTerm.cpp
constraints/ConstraintLagrange.cpp
constraints/ConstraintLagrangeNodeGroupDisplacements1D.cpp
constraints/ConstraintLagrangeNodeGroupDisplacements2D.cpp
constraints/ConstraintLinear.cpp
constraints/ConstraintLinearDerivativeNonlocalTotalStrain1D.cpp
constraints/ConstraintLinearDisplacementsPeriodic2D.cpp
constraints/ConstraintLinearEquation.cpp
constraints/ConstraintLinearNodeDisplacements1D.cpp
constraints/ConstraintLinearNodeDisplacements2D.cpp
constraints/ConstraintLinearNodeDisplacements3D.cpp
constraints/ConstraintLinearNodeGroupDisplacements1D.cpp
constraints/ConstraintLinearNodeGroupDisplacements2D.cpp
constraints/ConstraintLinearNodeGroupDisplacements3D.cpp
constraints/ConstraintLinearNodeGroupRotations2D.cpp
constraints/ConstraintLinearNodeGroupTemperature.cpp
constraints/ConstraintLinearNodeRelativeHumidity.cpp
constraints/ConstraintLinearNodeRotations2D.cpp
constraints/ConstraintLinearNodeWaterPhaseFraction.cpp
constraints/ConstraintNode.cpp
constraints/ConstraintNodeGroup.cpp
constraints/ConstraintNonlinear.cpp
)

SET(NuToMechanicsCrack_SOURCES
cracks/CrackBase.cpp
cracks/CrackExplicit2D.cpp
elements/ElementDataCrackBase.cpp
elements/ElementDataConstitutiveIpCrack.cpp
structures/unstructured/StructureCrack.cpp
)

SET(NuToMechanicsElements_SOURCES
elements/BoundaryGradientDamage1D.cpp
elements/Brick8N.cpp
elements/ElementBase.cpp
elements/ElementDataBase.cpp
elements/ElementDataConstitutiveBase.cpp
elements/ElementDataConstitutiveIp.cpp
elements/ElementDataConstitutiveIpNonlocal.cpp
elements/ElementDataIpBase.cpp
elements/ElementDataNonlocalBase.cpp
elements/ElementOutputBase.cpp
elements/ElementShapeFunctions.cpp
elements/IpDataBase.cpp
elements/IpDataEmpty.cpp
elements/IpDataCoordinates2DBase.cpp
elements/IpDataNonlocalBase.cpp
elements/IpDataStaticData.cpp
elements/IpDataStaticDataBase.cpp
elements/IpDataStaticDataWeightCoordinates2D.cpp
elements/IpDataStaticDataNonlocal.cpp
elements/IpDataWeightBase.cpp
elements/Plane.cpp
elements/Plane2D.cpp
elements/Plane2D10N.cpp
elements/Plane2D15N.cpp
elements/Plane2D3N.cpp
elements/Plane2D4N.cpp
elements/Plane2D4NSpectralOrder2.cpp
elements/Plane2D4NSpectralOrder3.cpp
elements/Plane2D4NSpectralOrder4.cpp
elements/Plane2D6N.cpp
elements/Solid.cpp
elements/Tetrahedron10N.cpp
elements/Truss.cpp
elements/Truss1D.cpp
elements/Truss1D2N.cpp
elements/Truss1D3N.cpp
elements/Truss1D4NDisp3NX.cpp
elements/Tetrahedron4N.cpp
)

SET(NuToMechanicsGroups_SOURCES
groups/Group.cpp
groups/GroupBase.cpp
)

SET(NuToMechanicsIntegrationtypes_SOURCES
integrationtypes/IntegrationPointBase.cpp
integrationtypes/IntegrationType1D.cpp
integrationtypes/IntegrationType1D2NBoundaryGauss3Ip.cpp
integrationtypes/IntegrationType0DBoundary.cpp
integrationtypes/IntegrationType1D2NConstVariableIp.cpp
integrationtypes/IntegrationType1D2NGauss1Ip.cpp
integrationtypes/IntegrationType1D2NGauss2Ip.cpp
integrationtypes/IntegrationType1D2NGauss3Ip.cpp
integrationtypes/IntegrationType1D2NLobatto3Ip.cpp
integrationtypes/IntegrationType1D2NLobatto4Ip.cpp
integrationtypes/IntegrationType1D2NLobatto5Ip.cpp
integrationtypes/IntegrationType2D.cpp
integrationtypes/IntegrationType2D3NGauss13Ip.cpp
integrationtypes/IntegrationType2D3NGauss16Ip.cpp
integrationtypes/IntegrationType2D3NGauss1Ip.cpp
integrationtypes/IntegrationType2D3NGauss3Ip.cpp
integrationtypes/IntegrationType2D4NConstVariableIp.cpp
integrationtypes/IntegrationType2D4NGauss1Ip.cpp
integrationtypes/IntegrationType2D4NGauss4Ip.cpp
integrationtypes/IntegrationType2D4NLobatto9Ip.cpp
integrationtypes/IntegrationType2D4NLobatto16Ip.cpp
integrationtypes/IntegrationType2D4NLobatto25Ip.cpp
integrationtypes/IntegrationType2D4NModTriangle.cpp
integrationtypes/IntegrationType2D4NModVariableIp.cpp
integrationtypes/IntegrationType2DMod.cpp
integrationtypes/IntegrationType3D.cpp
integrationtypes/IntegrationType3D4NGauss1Ip.cpp
integrationtypes/IntegrationType3D4NGauss4Ip.cpp
integrationtypes/IntegrationType3D8NGauss1Ip.cpp
integrationtypes/IntegrationType3D8NGauss2x2x2Ip.cpp
integrationtypes/IntegrationTypeBase.cpp
)

SET(NuToMechanicsLoads_SOURCES
loads/LoadBase.cpp
loads/LoadNode.cpp
loads/LoadNodeGroup.cpp
loads/LoadNodeForces1D.cpp
loads/LoadNodeForces2D.cpp
loads/LoadNodeForces3D.cpp
loads/LoadNodeGroupForces1D.cpp
loads/LoadNodeGroupForces2D.cpp
loads/LoadNodeGroupForces3D.cpp
loads/LoadSurfaceBase2D.cpp
loads/LoadSurfaceBase3D.cpp
loads/LoadSurfaceConstDirection2D.cpp
loads/LoadSurfaceConstDirection3D.cpp
loads/LoadSurfacePressure2D.cpp
loads/LoadSurfacePressure3D.cpp
)

SET(NuToMechanicsNodes_SOURCES
nodes/MapNodeKeyNodeEnum.cpp
nodes/NodeBase.cpp
nodes/NodeGrid1D.cpp
nodes/NodeGrid2D.cpp
nodes/NodeGrid3D.cpp
nodes/NodeRadius.cpp
nodes/NodeNonlocalDataBase.cpp
)

SET(NuToMechanicsSection_SOURCES
sections/SectionBase.cpp
sections/SectionTruss.cpp
sections/SectionPlane.cpp
sections/SectionVolume.cpp
)

SET(NuToMechanicsStructures_SOURCES
structures/StructureBase.cpp
structures/StructureBaseConstitutiveLaw.cpp
structures/StructureBaseConstraints.cpp
structures/StructureBaseElement.cpp
structures/StructureBaseGroup.cpp
structures/StructureBaseIntegrationTypes.cpp
structures/StructureBaseLoad.cpp
structures/StructureBaseLogger.cpp
structures/StructureBaseNode.cpp
structures/StructureBaseSection.cpp
structures/unstructured/Structure.cpp
structures/unstructured/StructureElement.cpp
structures/unstructured//StructureGroup.cpp
structures/unstructured/StructureMesh.cpp
structures/unstructured/StructureNode.cpp
structures/grid/OctreeGrid.cpp
structures/grid/MultiGridStructure.cpp
structures/grid/StructureGrid.cpp
structures/grid/StructureGridNode.cpp
structures/grid/StructureGridElement.cpp
)
SET(NuToMechanicsTimeIntegration_SOURCES
timeIntegration/NewmarkBase.cpp
timeIntegration/NewmarkDirect.cpp
timeIntegration/JumpDirect.cpp
timeIntegration/NystroemBase.cpp
timeIntegration/NystroemQinZhu.cpp
timeIntegration/ResultBase.cpp
timeIntegration/ResultElementIpBase.cpp
timeIntegration/ResultElementIpStress.cpp
timeIntegration/ResultGroupNodeForce.cpp
timeIntegration/ResultGroupNodeDof.cpp
timeIntegration/ResultNodeAcceleration.cpp
timeIntegration/ResultNodeDisp.cpp
timeIntegration/ResultNodeDof.cpp
timeIntegration/ResultTime.cpp
timeIntegration/RungeKutta38.cpp
timeIntegration/RungeKutta4.cpp
timeIntegration/RungeKuttaCashKarp.cpp
timeIntegration/RungeKuttaDormandPrince.cpp
timeIntegration/RungeKuttaBase.cpp
timeIntegration/TimeIntegrationBase.cpp
timeIntegration/VelocityVerlet.cpp
)



SET(NuToMechanics_SOURCES
MechanicsException.cpp ${NuToMechanicsConstitutive_SOURCES} ${NuToMechanicsConstraint_SOURCES}
${NuToMechanicsCrack_SOURCES} ${NuToMechanicsElements_SOURCES} ${NuToMechanicsGroups_SOURCES}
${NuToMechanicsIntegrationtypes_SOURCES} ${NuToMechanicsLoads_SOURCES}
${NuToMechanicsNodes_SOURCES} ${NuToMechanicsSection_SOURCES} ${NuToMechanicsStructures_SOURCES}
${NuToMechanicsTimeIntegration_SOURCES}
)

SET(NuToMechanics_SWIG_MODULES
  ModulMechanics
)

SET(SWIG_MODULE_ModulMechanics_EXTRA_DEPS 
  structures/grid/MultiGridStructure.h
  structures/StructureBase.h
  structures/unstructured/Structure.h
  structures/grid/StructureGrid.h
  elements/ElementEnum.h
)

# build static library
ADD_LIBRARY(NuToMechanics ${NuToMechanics_SOURCES})
TARGET_LINK_LIBRARIES(NuToMechanics NuToBase NuToMath ${ANN_LIBRARIES} ${MERSENNE_LIBRARIES})
IF (ENABLE_VISUALIZE)
  TARGET_LINK_LIBRARIES(NuToMechanics NuToVisualize)
ENDIF (ENABLE_VISUALIZE)
IF (ENABLE_OPTIMIZE)
  TARGET_LINK_LIBRARIES(NuToMechanics NuToOptimize)
ENDIF (ENABLE_OPTIMIZE)
IF (ENABLE_SHOW_TIME)
#add library for clock_gettime routines
  TARGET_LINK_LIBRARIES(NuToMechanics rt)
ENDIF (ENABLE_SHOW_TIME)
IF (ENABLE_CGAL)
#add library for clock_gettime routines
  TARGET_LINK_LIBRARIES(NuToMechanics ${CGAL_LIBRARIES})
ENDIF (ENABLE_CGAL)
IF(CMAKE_SYSTEM_PROCESSOR STREQUAL "x86_64" )
  SET_TARGET_PROPERTIES(NuToMechanics PROPERTIES COMPILE_FLAGS "-fPIC")
ENDIF(CMAKE_SYSTEM_PROCESSOR STREQUAL "x86_64" )
# install library
INSTALL(TARGETS NuToMechanics
	ARCHIVE DESTINATION ${NUTO_LIBRARIES_INSTALL_PATH}
	LIBRARY DESTINATION ${NUTO_LIBRARIES_INSTALL_PATH})

# build python modules
CONFIGURE_FILE(__init__.py ${CMAKE_CURRENT_BINARY_DIR}/__init__.py)
NUTO_INSTALL_PYTHON_FILE(__init__.py ${NUTO_PYTHON_MODULES_INSTALL_PATH}/nuto/mechanics)
FOREACH(NuToMechanics_SWIG_MODULE ${NuToMechanics_SWIG_MODULES})
  NUTO_SWIG_MODULE(${NuToMechanics_SWIG_MODULE} ${NuToMechanics_SWIG_MODULE}.i nuto/mechanics NuToMechanics)
ENDFOREACH(NuToMechanics_SWIG_MODULE)
