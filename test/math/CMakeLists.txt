#test files for math module
IF(ENABLE_PYTHON_TESTS)
  SET( CMAKE_VERBOSE_MAKEFILE on )

  ADD_TEST(importNuto ${PYTHON_EXECUTABLE} -c "import nuto")
  SET_PROPERTY(TEST importNuto PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")

  ADD_TEST(math::Matrix ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/Matrix.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
  SET_PROPERTY(TEST math::Matrix PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")


#####parts added
IF(ENABLE_NUMPY)
 ADD_TEST(math::NumpyFullMatrix ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/NumpyFullMatrix.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
  SET_PROPERTY(TEST math::NumpyFullMatrix PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")
ENDIF(ENABLE_NUMPY)

  ADD_TEST(math::SparseMatrixCSR ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/SparseMatrixCSR.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
  SET_PROPERTY(TEST math::SparseMatrixCSR PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")

ENDIF(ENABLE_PYTHON_TESTS)

IF(ENABLE_C++_TESTS)
IF(ENABLE_ARPACK)
 ADD_EXECUTABLE(Arpack Arpack.cpp)
 TARGET_LINK_LIBRARIES(Arpack NuToMath NuToBase ${Boost_LIBRARIES} ${LAPACK_LIBRARIES} )
  TARGET_LINK_LIBRARIES(Arpack ${ARPACK_LIBRARIES})

 IF(MINGW)
  SET_TARGET_PROPERTIES(Arpack PROPERTIES LINK_FLAGS -Wl,--enable-auto-import)
 ENDIF(MINGW)#
 ADD_TEST(math::Arpack ${CMAKE_CURRENT_BUILD_DIR}/Arpack)
ENDIF(ENABLE_ARPACK) 
ENDIF(ENABLE_C++_TESTS)
